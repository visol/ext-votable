!function(a){function b(b,c){var d=a("#"+b).html()||"Missing vote template",e=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+d.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return c?e(c):e}a.fn.votable=function(c){var d=a.extend(a.fn.votable.options,c);return console.log(d.votedItems),this.each(function(c,e){var f="",g=parseInt(a(e).data("object"));f=d.userIsAuthenticated?a.inArray(g,d.votedItems)>-1?b(d.templateIdentifier,{status:"vote-done hasTooltip",enabledOrDisabled:"disabled",object:a(e).data("object"),tooltip:d.label.tooltip,voting:d.label.voting,text:d.label.alreadyVoted}):b(d.templateIdentifier,{status:"vote-ready hasTooltip",enabledOrDisabled:"enabled",object:a(e).data("object"),tooltip:d.label.tooltip,voting:d.label.voting,text:d.label.vote}):b(d.templateIdentifier,{status:"vote-authentication-required",enabledOrDisabled:"disabled",object:"",tooltip:"",voting:d.label.voting,text:d.label.authenticationRequired}),a(this).html(f)}),a(".vote-authentication-required").off("click").on("click",d.whenUserIsLoggedOff),a(".vote-ready").on("click",function(b){b.preventDefault(),a(this).hide().prev().show();var c={};c["tx_votable_pi1[vote]"]=a(this).data("object"),c.value=a(this).data("value"),c.contentElement=d.contentElement,a.ajax({url:window.location.pathname+"?type=1451549782",data:c,context:this}).done(function(){a(this).show().removeClass("vote-ready").addClass("vote-done").html('<i class="evicon-like voting-disabled"></i>'+d.label.alreadyVoted+"</a>").prev().hide()}).fail(function(){console.log("Something went wrong when voting!")})}),this};a.fn.votable.options={whenUserIsLoggedOff:function(){},userIsAuthenticated:!1,templateIdentifier:"votable-template",contentElement:0,votedItems:[],label:{authenticationRequired:"log-in to vote",alreadyVoted:"You already voted",tooltip:"You can vote only once for this item.",voting:"Voting...",vote:"vote"}}}(jQuery);