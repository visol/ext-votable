!function(a){function b(b,c){b.each(function(b,d){var e="",g=parseInt(a(d).data("object"));e=c.userIsAuthenticated?a.inArray(g,c.votedItems)>-1?f(c.templateIdentifier,{status:"vote-done hasTooltip",enabledOrDisabled:"disabled",object:a(d).data("object"),tooltip:c.label.tooltip,voting:c.label.voting,text:c.label.alreadyVoted}):f(c.templateIdentifier,{status:"vote-ready hasTooltip",enabledOrDisabled:"enabled",object:a(d).data("object"),tooltip:c.label.tooltip,voting:c.label.voting,text:c.label.vote}):f(c.templateIdentifier,{status:"vote-authentication-required",enabledOrDisabled:"disabled",object:"",tooltip:"",voting:c.label.voting,text:c.label.authenticationRequired}),a(this).html(e)})}function c(b){a(".vote-authentication-required").off("click").on("click",b.whenUserIsLoggedOff),a(".vote-done").on("click",{settings:b},e),a(".vote-ready").on("click",{settings:b},d)}function d(b){b.preventDefault();var c=b.data.settings;a(this).hide().prev().show();var d={};d["tx_votable_pi1[vote]"]=a(this).data("object"),d.value=a(this).data("value"),d.contentElement=c.contentElement,a.ajax({url:window.location.pathname+"?type=1451549782",data:d,context:this}).done(function(d){"add"===d.action&&d.success?(a(this).show().removeClass("vote-ready").addClass("vote-done").off("click").on("click",{settings:c},e).html('<i class="evicon-like voting-disabled"></i>'+c.label.alreadyVoted+"</a>").prev().hide(),b.data.settings.afterVoteChange(b,"add")):console.log(d)}).fail(function(){console.log("Something went wrong when adding this vote!")})}function e(b){b.preventDefault();var c=b.data.settings;a(this).hide().prev().show();var e={};e["tx_votable_pi1[vote]"]=a(this).data("object"),e.contentElement=c.contentElement,a.ajax({url:window.location.pathname+"?type=1451549783",data:e,context:this}).done(function(e){"remove"===e.action&&e.success?(a(this).show().removeClass("vote-done").addClass("vote-ready").off("click").on("click",{settings:c},d).html('<i class="evicon-like voting-enabled"></i>'+c.label.vote+"</a>").prev().hide(),b.data.settings.afterVoteChange(b,"remove")):console.log(e)}).fail(function(){console.log("Something went wrong when removing this vote!")})}function f(b,c){var d=a("#"+b).html()||"Missing vote template",e=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+d.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return c?e(c):e}a.fn.votable=function(d){var e=a.extend(a.fn.votable.options,d);return e.isVoteOpen===!0?(b(this,e),c(e)):window.console&&console.log("[INFO] Votes are currently closed."),this};a.fn.votable.options={whenUserIsLoggedOff:function(){},afterVoteChange:function(a){},userIsAuthenticated:!1,templateIdentifier:"votable-template",contentElement:0,votedItems:[],isVoteOpen:!0,label:{authenticationRequired:"log-in to vote",alreadyVoted:"You already voted",tooltip:"You can vote only once for this item.",voting:"Voting...",vote:"vote"}}}(jQuery);